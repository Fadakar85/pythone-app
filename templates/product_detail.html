{% extends "base.html" %}

{% block content %}
<div class="container mt-4">
    <div class="row">
        <div class="col-lg-4 col-md-6">
            {% if product.image_path %}
            <img src="{{ url_for('static', filename='uploads/' + product.image_path) }}" 
                 class="img-fluid" alt="{{ product.name }}">
            {% endif %}
        </div>
        
        <div class="col-md-6">
            <h2>{{ product.name }}</h2>
            <h3 class="mb-4">قیمت: {{ product.price }} تومان</h3>
            <p class="text-muted">فروشنده: {{ product.owner.username }}</p>
            <hr class="w-100">
            <p>توضیحات و ویژگی ها:</p>
            <p class="lead">{{ product.description }}</p>
            <hr class="w-100">
            <p>اطلاعات بیشتر:</p>
            {% if product.address %}
                <p><strong>آدرس:</strong> {{ product.address }}</p>
            {% else %}
                <p>آدرس وارد نشده است</p>
            {% endif %}
            {% if user.phone %}
                <div class="d-flex flex-nowrap justify-content-start align-items-center my-3"><strong class="m-0">شماره تلفن:</strong><p onclick="copyText(this)" class="header-tabs py-2 px-3 w-75 m-0">{{ user.phone }}</p></div>
            {% else %}
                <p>شماره تلفن وارد نشده است</p>
            {% endif %}
            {% if product.product_type %}
                <p><strong>نوع محصول:</strong> {{ product.product_type.value }}</p>
            {% else %}
                <p>نوع محصول وارد نشده است</p>
            {% endif %}
            <p>تاریخ انتشار: {{ product.updated_at }}</p>
        </div>
    </div>
</div>
<script>
    function copyText(element) {
            const text = element.innerText || element.textContent;
            
            navigator.clipboard.writeText(text).then(() => {
                let toast = document.createElement("span");
                toast.classList.add("toast-message");
                toast.innerText = "متن با موفقیت کپی شد!";
                
                document.body.appendChild(toast);

                // نمایش پیام
                setTimeout(() => {
                    toast.classList.add("show");
                }, 10);

                // حذف پیام بعد از 2 ثانیه
                setTimeout(() => {
                    toast.classList.remove("show");
                    setTimeout(() => {
                        toast.remove();
                    }, 300);
                }, 2000);
            }).catch(err => {
                console.error("خطا در کپی کردن متن:", err);
            });
        }
</script>
{% endblock %}
